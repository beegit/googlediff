function diff_match_patch(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Match_Threshold=.5;this.Match_Distance=1e3;this.Patch_DeleteThreshold=.5;this.Patch_Margin=4;this.Match_MaxBits=32}var DIFF_DELETE=-1;var DIFF_INSERT=1;var DIFF_EQUAL=0;diff_match_patch.Diff;diff_match_patch.prototype.diff_words=function(e,t){var n=this.diff_linesToWords(e,t);var r=n.chars1;var i=n.chars2;var s=n.lineArray;var o=this.diff_main(r,i,false);this.diff_charsToLines_(o,s);this.diff_cleanupSemantic(o);return o};diff_match_patch.prototype.diff_linesToWords=function(e,t){function i(e,t,n){var r=e.substring(n||0).search(t);return r>=0?r+(n||0):r}function s(e){var t="";var s=0;var o=-1;var u=n.length;while(o<e.length-1){o=i(e,/(\W)/g,s);if(o==-1){o=e.length-1}var a=e.substring(s,o+1);s=o+1;if(r.hasOwnProperty?r.hasOwnProperty(a):r[a]!==undefined){t+=String.fromCharCode(r[a])}else{t+=String.fromCharCode(u);r[a]=u;n[u++]=a}}return t}var n=[];var r={};n[0]="";var o=s(e);var u=s(t);return{chars1:o,chars2:u,lineArray:n}};diff_match_patch.prototype.diff_main=function(e,t,n,r){if(typeof r=="undefined"){if(this.Diff_Timeout<=0){r=Number.MAX_VALUE}else{r=(new Date).getTime()+this.Diff_Timeout*1e3}}var i=r;if(e==null||t==null){throw new Error("Null input. (diff_main)")}if(e==t){if(e){return[[DIFF_EQUAL,e]]}return[]}if(typeof n=="undefined"){n=true}var s=n;var o=this.diff_commonPrefix(e,t);var u=e.substring(0,o);e=e.substring(o);t=t.substring(o);o=this.diff_commonSuffix(e,t);var a=e.substring(e.length-o);e=e.substring(0,e.length-o);t=t.substring(0,t.length-o);var f=this.diff_compute_(e,t,s,i);if(u){f.unshift([DIFF_EQUAL,u])}if(a){f.push([DIFF_EQUAL,a])}this.diff_cleanupMerge(f);return f};diff_match_patch.prototype.diff_compute_=function(e,t,n,r){var i;if(!e){return[[DIFF_INSERT,t]]}if(!t){return[[DIFF_DELETE,e]]}var s=e.length>t.length?e:t;var o=e.length>t.length?t:e;var u=s.indexOf(o);if(u!=-1){i=[[DIFF_INSERT,s.substring(0,u)],[DIFF_EQUAL,o],[DIFF_INSERT,s.substring(u+o.length)]];if(e.length>t.length){i[0][0]=i[2][0]=DIFF_DELETE}return i}if(o.length==1){return[[DIFF_DELETE,e],[DIFF_INSERT,t]]}var a=this.diff_halfMatch_(e,t);if(a){var f=a[0];var l=a[1];var c=a[2];var h=a[3];var p=a[4];var d=this.diff_main(f,c,n,r);var v=this.diff_main(l,h,n,r);return d.concat([[DIFF_EQUAL,p]],v)}if(n&&e.length>100&&t.length>100){return this.diff_lineMode_(e,t,r)}return this.diff_bisect_(e,t,r)};diff_match_patch.prototype.diff_lineMode_=function(e,t,n){var r=this.diff_linesToChars_(e,t);e=r.chars1;t=r.chars2;var i=r.lineArray;var s=this.diff_main(e,t,false,n);this.diff_charsToLines_(s,i);this.diff_cleanupSemantic(s);s.push([DIFF_EQUAL,""]);var o=0;var u=0;var a=0;var f="";var l="";while(o<s.length){switch(s[o][0]){case DIFF_INSERT:a++;l+=s[o][1];break;case DIFF_DELETE:u++;f+=s[o][1];break;case DIFF_EQUAL:if(u>=1&&a>=1){s.splice(o-u-a,u+a);o=o-u-a;var r=this.diff_main(f,l,false,n);for(var c=r.length-1;c>=0;c--){s.splice(o,0,r[c])}o=o+r.length}a=0;u=0;f="";l="";break}o++}s.pop();return s};diff_match_patch.prototype.diff_bisect_=function(e,t,n){var r=e.length;var i=t.length;var s=Math.ceil((r+i)/2);var o=s;var u=2*s;var a=new Array(u);var f=new Array(u);for(var l=0;l<u;l++){a[l]=-1;f[l]=-1}a[o+1]=0;f[o+1]=0;var c=r-i;var h=c%2!=0;var p=0;var d=0;var v=0;var m=0;for(var g=0;g<s;g++){if((new Date).getTime()>n){break}for(var y=-g+p;y<=g-d;y+=2){var b=o+y;var w;if(y==-g||y!=g&&a[b-1]<a[b+1]){w=a[b+1]}else{w=a[b-1]+1}var E=w-y;while(w<r&&E<i&&e.charAt(w)==t.charAt(E)){w++;E++}a[b]=w;if(w>r){d+=2}else if(E>i){p+=2}else if(h){var S=o+c-y;if(S>=0&&S<u&&f[S]!=-1){var x=r-f[S];if(w>=x){return this.diff_bisectSplit_(e,t,w,E,n)}}}}for(var T=-g+v;T<=g-m;T+=2){var S=o+T;var x;if(T==-g||T!=g&&f[S-1]<f[S+1]){x=f[S+1]}else{x=f[S-1]+1}var N=x-T;while(x<r&&N<i&&e.charAt(r-x-1)==t.charAt(i-N-1)){x++;N++}f[S]=x;if(x>r){m+=2}else if(N>i){v+=2}else if(!h){var b=o+c-T;if(b>=0&&b<u&&a[b]!=-1){var w=a[b];var E=o+w-b;x=r-x;if(w>=x){return this.diff_bisectSplit_(e,t,w,E,n)}}}}}return[[DIFF_DELETE,e],[DIFF_INSERT,t]]};diff_match_patch.prototype.diff_bisectSplit_=function(e,t,n,r,i){var s=e.substring(0,n);var o=t.substring(0,r);var u=e.substring(n);var a=t.substring(r);var f=this.diff_main(s,o,false,i);var l=this.diff_main(u,a,false,i);return f.concat(l)};diff_match_patch.prototype.diff_linesToChars_=function(e,t){function i(e){var t="";var i=0;var s=-1;var o=n.length;while(s<e.length-1){s=e.indexOf("\n",i);if(s==-1){s=e.length-1}var u=e.substring(i,s+1);i=s+1;if(r.hasOwnProperty?r.hasOwnProperty(u):r[u]!==undefined){t+=String.fromCharCode(r[u])}else{t+=String.fromCharCode(o);r[u]=o;n[o++]=u}}return t}var n=[];var r={};n[0]="";var s=i(e);var o=i(t);return{chars1:s,chars2:o,lineArray:n}};diff_match_patch.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){var r=e[n][1];var i=[];for(var s=0;s<r.length;s++){i[s]=t[r.charCodeAt(s)]}e[n][1]=i.join("")}};diff_match_patch.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0)){return 0}var n=0;var r=Math.min(e.length,t.length);var i=r;var s=0;while(n<i){if(e.substring(s,i)==t.substring(s,i)){n=i;s=n}else{r=i}i=Math.floor((r-n)/2+n)}return i};diff_match_patch.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1)){return 0}var n=0;var r=Math.min(e.length,t.length);var i=r;var s=0;while(n<i){if(e.substring(e.length-i,e.length-s)==t.substring(t.length-i,t.length-s)){n=i;s=n}else{r=i}i=Math.floor((r-n)/2+n)}return i};diff_match_patch.prototype.diff_commonOverlap_=function(e,t){var n=e.length;var r=t.length;if(n==0||r==0){return 0}if(n>r){e=e.substring(n-r)}else if(n<r){t=t.substring(0,n)}var i=Math.min(n,r);if(e==t){return i}var s=0;var o=1;while(true){var u=e.substring(i-o);var a=t.indexOf(u);if(a==-1){return s}o+=a;if(a==0||e.substring(i-o)==t.substring(0,o)){s=o;o++}}};diff_match_patch.prototype.diff_halfMatch_=function(e,t){function s(e,t,n){var r=e.substring(n,n+Math.floor(e.length/4));var s=-1;var o="";var u,a,f,l;while((s=t.indexOf(r,s+1))!=-1){var c=i.diff_commonPrefix(e.substring(n),t.substring(s));var h=i.diff_commonSuffix(e.substring(0,n),t.substring(0,s));if(o.length<h+c){o=t.substring(s-h,s)+t.substring(s,s+c);u=e.substring(0,n-h);a=e.substring(n+c);f=t.substring(0,s-h);l=t.substring(s+c)}}if(o.length*2>=e.length){return[u,a,f,l,o]}else{return null}}if(this.Diff_Timeout<=0){return null}var n=e.length>t.length?e:t;var r=e.length>t.length?t:e;if(n.length<4||r.length*2<n.length){return null}var i=this;var o=s(n,r,Math.ceil(n.length/4));var u=s(n,r,Math.ceil(n.length/2));var a;if(!o&&!u){return null}else if(!u){a=o}else if(!o){a=u}else{a=o[4].length>u[4].length?o:u}var f,l,c,h;if(e.length>t.length){f=a[0];l=a[1];c=a[2];h=a[3]}else{c=a[0];h=a[1];f=a[2];l=a[3]}var p=a[4];return[f,l,c,h,p]};diff_match_patch.prototype.diff_cleanupSemantic=function(e){var t=false;var n=[];var r=0;var i=null;var s=0;var o=0;var u=0;var a=0;var f=0;while(s<e.length){if(e[s][0]==DIFF_EQUAL){n[r++]=s;o=a;u=f;a=0;f=0;i=e[s][1]}else{if(e[s][0]==DIFF_INSERT){a+=e[s][1].length}else{f+=e[s][1].length}if(i&&i.length<=Math.max(o,u)&&i.length<=Math.max(a,f)){e.splice(n[r-1],0,[DIFF_DELETE,i]);e[n[r-1]+1][0]=DIFF_INSERT;r--;r--;s=r>0?n[r-1]:-1;o=0;u=0;a=0;f=0;i=null;t=true}}s++}if(t){this.diff_cleanupMerge(e)}this.diff_cleanupSemanticLossless(e);s=1;while(s<e.length){if(e[s-1][0]==DIFF_DELETE&&e[s][0]==DIFF_INSERT){var l=e[s-1][1];var c=e[s][1];var h=this.diff_commonOverlap_(l,c);var p=this.diff_commonOverlap_(c,l);if(h>=p){if(h>=l.length/2||h>=c.length/2){e.splice(s,0,[DIFF_EQUAL,c.substring(0,h)]);e[s-1][1]=l.substring(0,l.length-h);e[s+1][1]=c.substring(h);s++}}else{if(p>=l.length/2||p>=c.length/2){e.splice(s,0,[DIFF_EQUAL,l.substring(0,p)]);e[s-1][0]=DIFF_INSERT;e[s-1][1]=c.substring(0,c.length-p);e[s+1][0]=DIFF_DELETE;e[s+1][1]=l.substring(p);s++}}s++}s++}};diff_match_patch.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t){return 6}var n=e.charAt(e.length-1);var r=t.charAt(0);var i=n.match(diff_match_patch.nonAlphaNumericRegex_);var s=r.match(diff_match_patch.nonAlphaNumericRegex_);var o=i&&n.match(diff_match_patch.whitespaceRegex_);var u=s&&r.match(diff_match_patch.whitespaceRegex_);var a=o&&n.match(diff_match_patch.linebreakRegex_);var f=u&&r.match(diff_match_patch.linebreakRegex_);var l=a&&e.match(diff_match_patch.blanklineEndRegex_);var c=f&&t.match(diff_match_patch.blanklineStartRegex_);if(l||c){return 5}else if(a||f){return 4}else if(i&&!o&&u){return 3}else if(o||u){return 2}else if(i||s){return 1}return 0}var n=1;while(n<e.length-1){if(e[n-1][0]==DIFF_EQUAL&&e[n+1][0]==DIFF_EQUAL){var r=e[n-1][1];var i=e[n][1];var s=e[n+1][1];var o=this.diff_commonSuffix(r,i);if(o){var u=i.substring(i.length-o);r=r.substring(0,r.length-o);i=u+i.substring(0,i.length-o);s=u+s}var a=r;var f=i;var l=s;var c=t(r,i)+t(i,s);while(i.charAt(0)===s.charAt(0)){r+=i.charAt(0);i=i.substring(1)+s.charAt(0);s=s.substring(1);var h=t(r,i)+t(i,s);if(h>=c){c=h;a=r;f=i;l=s}}if(e[n-1][1]!=a){if(a){e[n-1][1]=a}else{e.splice(n-1,1);n--}e[n][1]=f;if(l){e[n+1][1]=l}else{e.splice(n+1,1);n--}}}n++}};diff_match_patch.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/;diff_match_patch.whitespaceRegex_=/\s/;diff_match_patch.linebreakRegex_=/[\r\n]/;diff_match_patch.blanklineEndRegex_=/\n\r?\n$/;diff_match_patch.blanklineStartRegex_=/^\r?\n\r?\n/;diff_match_patch.prototype.diff_cleanupEfficiency=function(e){var t=false;var n=[];var r=0;var i=null;var s=0;var o=false;var u=false;var a=false;var f=false;while(s<e.length){if(e[s][0]==DIFF_EQUAL){if(e[s][1].length<this.Diff_EditCost&&(a||f)){n[r++]=s;o=a;u=f;i=e[s][1]}else{r=0;i=null}a=f=false}else{if(e[s][0]==DIFF_DELETE){f=true}else{a=true}if(i&&(o&&u&&a&&f||i.length<this.Diff_EditCost/2&&o+u+a+f==3)){e.splice(n[r-1],0,[DIFF_DELETE,i]);e[n[r-1]+1][0]=DIFF_INSERT;r--;i=null;if(o&&u){a=f=true;r=0}else{r--;s=r>0?n[r-1]:-1;a=f=false}t=true}}s++}if(t){this.diff_cleanupMerge(e)}};diff_match_patch.prototype.diff_cleanupMerge=function(e){e.push([DIFF_EQUAL,""]);var t=0;var n=0;var r=0;var i="";var s="";var o;while(t<e.length){switch(e[t][0]){case DIFF_INSERT:r++;s+=e[t][1];t++;break;case DIFF_DELETE:n++;i+=e[t][1];t++;break;case DIFF_EQUAL:if(n+r>1){if(n!==0&&r!==0){o=this.diff_commonPrefix(s,i);if(o!==0){if(t-n-r>0&&e[t-n-r-1][0]==DIFF_EQUAL){e[t-n-r-1][1]+=s.substring(0,o)}else{e.splice(0,0,[DIFF_EQUAL,s.substring(0,o)]);t++}s=s.substring(o);i=i.substring(o)}o=this.diff_commonSuffix(s,i);if(o!==0){e[t][1]=s.substring(s.length-o)+e[t][1];s=s.substring(0,s.length-o);i=i.substring(0,i.length-o)}}if(n===0){e.splice(t-r,n+r,[DIFF_INSERT,s])}else if(r===0){e.splice(t-n,n+r,[DIFF_DELETE,i])}else{e.splice(t-n-r,n+r,[DIFF_DELETE,i],[DIFF_INSERT,s])}t=t-n-r+(n?1:0)+(r?1:0)+1}else if(t!==0&&e[t-1][0]==DIFF_EQUAL){e[t-1][1]+=e[t][1];e.splice(t,1)}else{t++}r=0;n=0;i="";s="";break}}if(e[e.length-1][1]===""){e.pop()}var u=false;t=1;while(t<e.length-1){if(e[t-1][0]==DIFF_EQUAL&&e[t+1][0]==DIFF_EQUAL){if(e[t][1].substring(e[t][1].length-e[t-1][1].length)==e[t-1][1]){e[t][1]=e[t-1][1]+e[t][1].substring(0,e[t][1].length-e[t-1][1].length);e[t+1][1]=e[t-1][1]+e[t+1][1];e.splice(t-1,1);u=true}else if(e[t][1].substring(0,e[t+1][1].length)==e[t+1][1]){e[t-1][1]+=e[t+1][1];e[t][1]=e[t][1].substring(e[t+1][1].length)+e[t+1][1];e.splice(t+1,1);u=true}}t++}if(u){this.diff_cleanupMerge(e)}};diff_match_patch.prototype.diff_xIndex=function(e,t){var n=0;var r=0;var i=0;var s=0;var o;for(o=0;o<e.length;o++){if(e[o][0]!==DIFF_INSERT){n+=e[o][1].length}if(e[o][0]!==DIFF_DELETE){r+=e[o][1].length}if(n>t){break}i=n;s=r}if(e.length!=o&&e[o][0]===DIFF_DELETE){return s}return s+(t-i)};diff_match_patch.prototype.diff_prettyHtml=function(e){var t=[];var n=/&/g;var r=/</g;var i=/>/g;var s=/\n/g;for(var o=0;o<e.length;o++){var u=e[o][0];var a=e[o][1];var f=a.replace(n,"&").replace(r,"&lt;").replace(i,"&gt;").replace(s,"&para;<br>");switch(u){case DIFF_INSERT:t[o]='<ins style="background:#e6ffe6;">'+f+"</ins>";break;case DIFF_DELETE:t[o]='<del style="background:#ffe6e6;">'+f+"</del>";break;case DIFF_EQUAL:t[o]="<span>"+f+"</span>";break}}return t.join("")};diff_match_patch.prototype.diff_text1=function(e){var t=[];for(var n=0;n<e.length;n++){if(e[n][0]!==DIFF_INSERT){t[n]=e[n][1]}}return t.join("")};diff_match_patch.prototype.diff_text2=function(e){var t=[];for(var n=0;n<e.length;n++){if(e[n][0]!==DIFF_DELETE){t[n]=e[n][1]}}return t.join("")};diff_match_patch.prototype.diff_levenshtein=function(e){var t=0;var n=0;var r=0;for(var i=0;i<e.length;i++){var s=e[i][0];var o=e[i][1];switch(s){case DIFF_INSERT:n+=o.length;break;case DIFF_DELETE:r+=o.length;break;case DIFF_EQUAL:t+=Math.max(n,r);n=0;r=0;break}}t+=Math.max(n,r);return t};diff_match_patch.prototype.diff_toDelta=function(e){var t=[];for(var n=0;n<e.length;n++){switch(e[n][0]){case DIFF_INSERT:t[n]="+"+encodeURI(e[n][1]);break;case DIFF_DELETE:t[n]="-"+e[n][1].length;break;case DIFF_EQUAL:t[n]="="+e[n][1].length;break}}return t.join("	").replace(/%20/g," ")};diff_match_patch.prototype.diff_fromDelta=function(e,t){var n=[];var r=0;var i=0;var s=t.split(/\t/g);for(var o=0;o<s.length;o++){var u=s[o].substring(1);switch(s[o].charAt(0)){case"+":try{n[r++]=[DIFF_INSERT,decodeURI(u)]}catch(a){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var f=parseInt(u,10);if(isNaN(f)||f<0){throw new Error("Invalid number in diff_fromDelta: "+u)}var l=e.substring(i,i+=f);if(s[o].charAt(0)=="="){n[r++]=[DIFF_EQUAL,l]}else{n[r++]=[DIFF_DELETE,l]}break;default:if(s[o]){throw new Error("Invalid diff operation in diff_fromDelta: "+s[o])}}}if(i!=e.length){throw new Error("Delta length ("+i+") does not equal source text length ("+e.length+").")}return n};diff_match_patch.prototype.match_main=function(e,t,n){if(e==null||t==null||n==null){throw new Error("Null input. (match_main)")}n=Math.max(0,Math.min(n,e.length));if(e==t){return 0}else if(!e.length){return-1}else if(e.substring(n,n+t.length)==t){return n}else{return this.match_bitap_(e,t,n)}};diff_match_patch.prototype.match_bitap_=function(e,t,n){function s(e,r){var s=e/t.length;var o=Math.abs(n-r);if(!i.Match_Distance){return o?1:s}return s+o/i.Match_Distance}if(t.length>this.Match_MaxBits){throw new Error("Pattern too long for this browser.")}var r=this.match_alphabet_(t);var i=this;var o=this.Match_Threshold;var u=e.indexOf(t,n);if(u!=-1){o=Math.min(s(0,u),o);u=e.lastIndexOf(t,n+t.length);if(u!=-1){o=Math.min(s(0,u),o)}}var a=1<<t.length-1;u=-1;var f,l;var c=t.length+e.length;var h;for(var p=0;p<t.length;p++){f=0;l=c;while(f<l){if(s(p,n+l)<=o){f=l}else{c=l}l=Math.floor((c-f)/2+f)}c=l;var d=Math.max(1,n-l+1);var v=Math.min(n+l,e.length)+t.length;var m=Array(v+2);m[v+1]=(1<<p)-1;for(var g=v;g>=d;g--){var y=r[e.charAt(g-1)];if(p===0){m[g]=(m[g+1]<<1|1)&y}else{m[g]=(m[g+1]<<1|1)&y|((h[g+1]|h[g])<<1|1)|h[g+1]}if(m[g]&a){var b=s(p,g-1);if(b<=o){o=b;u=g-1;if(u>n){d=Math.max(1,2*n-u)}else{break}}}}if(s(p+1,n)>o){break}h=m}return u};diff_match_patch.prototype.match_alphabet_=function(e){var t={};for(var n=0;n<e.length;n++){t[e.charAt(n)]=0}for(var n=0;n<e.length;n++){t[e.charAt(n)]|=1<<e.length-n-1}return t};diff_match_patch.prototype.patch_addContext_=function(e,t){if(t.length==0){return}var n=t.substring(e.start2,e.start2+e.length1);var r=0;while(t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin){r+=this.Patch_Margin;n=t.substring(e.start2-r,e.start2+e.length1+r)}r+=this.Patch_Margin;var i=t.substring(e.start2-r,e.start2);if(i){e.diffs.unshift([DIFF_EQUAL,i])}var s=t.substring(e.start2+e.length1,e.start2+e.length1+r);if(s){e.diffs.push([DIFF_EQUAL,s])}e.start1-=i.length;e.start2-=i.length;e.length1+=i.length+s.length;e.length2+=i.length+s.length};diff_match_patch.prototype.patch_make=function(e,t,n){var r,i;if(typeof e=="string"&&typeof t=="string"&&typeof n=="undefined"){r=e;i=this.diff_main(r,t,true);if(i.length>2){this.diff_cleanupSemantic(i);this.diff_cleanupEfficiency(i)}}else if(e&&typeof e=="object"&&typeof t=="undefined"&&typeof n=="undefined"){i=e;r=this.diff_text1(i)}else if(typeof e=="string"&&t&&typeof t=="object"&&typeof n=="undefined"){r=e;i=t}else if(typeof e=="string"&&typeof t=="string"&&n&&typeof n=="object"){r=e;i=n}else{throw new Error("Unknown call format to patch_make.")}if(i.length===0){return[]}var s=[];var o=new diff_match_patch.patch_obj;var u=0;var a=0;var f=0;var l=r;var c=r;for(var h=0;h<i.length;h++){var p=i[h][0];var d=i[h][1];if(!u&&p!==DIFF_EQUAL){o.start1=a;o.start2=f}switch(p){case DIFF_INSERT:o.diffs[u++]=i[h];o.length2+=d.length;c=c.substring(0,f)+d+c.substring(f);break;case DIFF_DELETE:o.length1+=d.length;o.diffs[u++]=i[h];c=c.substring(0,f)+c.substring(f+d.length);break;case DIFF_EQUAL:if(d.length<=2*this.Patch_Margin&&u&&i.length!=h+1){o.diffs[u++]=i[h];o.length1+=d.length;o.length2+=d.length}else if(d.length>=2*this.Patch_Margin){if(u){this.patch_addContext_(o,l);s.push(o);o=new diff_match_patch.patch_obj;u=0;l=c;a=f}}break}if(p!==DIFF_INSERT){a+=d.length}if(p!==DIFF_DELETE){f+=d.length}}if(u){this.patch_addContext_(o,l);s.push(o)}return s};diff_match_patch.prototype.patch_deepCopy=function(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n];var i=new diff_match_patch.patch_obj;i.diffs=[];for(var s=0;s<r.diffs.length;s++){i.diffs[s]=r.diffs[s].slice()}i.start1=r.start1;i.start2=r.start2;i.length1=r.length1;i.length2=r.length2;t[n]=i}return t};diff_match_patch.prototype.patch_apply=function(e,t){if(e.length==0){return[t,[]]}e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n;this.patch_splitMax(e);var r=0;var i=[];for(var s=0;s<e.length;s++){var o=e[s].start2+r;var u=this.diff_text1(e[s].diffs);var a;var f=-1;if(u.length>this.Match_MaxBits){a=this.match_main(t,u.substring(0,this.Match_MaxBits),o);if(a!=-1){f=this.match_main(t,u.substring(u.length-this.Match_MaxBits),o+u.length-this.Match_MaxBits);if(f==-1||a>=f){a=-1}}}else{a=this.match_main(t,u,o)}if(a==-1){i[s]=false;r-=e[s].length2-e[s].length1}else{i[s]=true;r=a-o;var l;if(f==-1){l=t.substring(a,a+u.length)}else{l=t.substring(a,f+this.Match_MaxBits)}if(u==l){t=t.substring(0,a)+this.diff_text2(e[s].diffs)+t.substring(a+u.length)}else{var c=this.diff_main(u,l,false);if(u.length>this.Match_MaxBits&&this.diff_levenshtein(c)/u.length>this.Patch_DeleteThreshold){i[s]=false}else{this.diff_cleanupSemanticLossless(c);var h=0;var p;for(var d=0;d<e[s].diffs.length;d++){var v=e[s].diffs[d];if(v[0]!==DIFF_EQUAL){p=this.diff_xIndex(c,h)}if(v[0]===DIFF_INSERT){t=t.substring(0,a+p)+v[1]+t.substring(a+p)}else if(v[0]===DIFF_DELETE){t=t.substring(0,a+p)+t.substring(a+this.diff_xIndex(c,h+v[1].length))}if(v[0]!==DIFF_DELETE){h+=v[1].length}}}}}}t=t.substring(n.length,t.length-n.length);return[t,i]};diff_match_patch.prototype.patch_addPadding=function(e){var t=this.Patch_Margin;var n="";for(var r=1;r<=t;r++){n+=String.fromCharCode(r)}for(var r=0;r<e.length;r++){e[r].start1+=t;e[r].start2+=t}var i=e[0];var s=i.diffs;if(s.length==0||s[0][0]!=DIFF_EQUAL){s.unshift([DIFF_EQUAL,n]);i.start1-=t;i.start2-=t;i.length1+=t;i.length2+=t}else if(t>s[0][1].length){var o=t-s[0][1].length;s[0][1]=n.substring(s[0][1].length)+s[0][1];i.start1-=o;i.start2-=o;i.length1+=o;i.length2+=o}i=e[e.length-1];s=i.diffs;if(s.length==0||s[s.length-1][0]!=DIFF_EQUAL){s.push([DIFF_EQUAL,n]);i.length1+=t;i.length2+=t}else if(t>s[s.length-1][1].length){var o=t-s[s.length-1][1].length;s[s.length-1][1]+=n.substring(0,o);i.length1+=o;i.length2+=o}return n};diff_match_patch.prototype.patch_splitMax=function(e){var t=this.Match_MaxBits;for(var n=0;n<e.length;n++){if(e[n].length1<=t){continue}var r=e[n];e.splice(n--,1);var i=r.start1;var s=r.start2;var o="";while(r.diffs.length!==0){var u=new diff_match_patch.patch_obj;var a=true;u.start1=i-o.length;u.start2=s-o.length;if(o!==""){u.length1=u.length2=o.length;u.diffs.push([DIFF_EQUAL,o])}while(r.diffs.length!==0&&u.length1<t-this.Patch_Margin){var f=r.diffs[0][0];var l=r.diffs[0][1];if(f===DIFF_INSERT){u.length2+=l.length;s+=l.length;u.diffs.push(r.diffs.shift());a=false}else if(f===DIFF_DELETE&&u.diffs.length==1&&u.diffs[0][0]==DIFF_EQUAL&&l.length>2*t){u.length1+=l.length;i+=l.length;a=false;u.diffs.push([f,l]);r.diffs.shift()}else{l=l.substring(0,t-u.length1-this.Patch_Margin);u.length1+=l.length;i+=l.length;if(f===DIFF_EQUAL){u.length2+=l.length;s+=l.length}else{a=false}u.diffs.push([f,l]);if(l==r.diffs[0][1]){r.diffs.shift()}else{r.diffs[0][1]=r.diffs[0][1].substring(l.length)}}}o=this.diff_text2(u.diffs);o=o.substring(o.length-this.Patch_Margin);var c=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);if(c!==""){u.length1+=c.length;u.length2+=c.length;if(u.diffs.length!==0&&u.diffs[u.diffs.length-1][0]===DIFF_EQUAL){u.diffs[u.diffs.length-1][1]+=c}else{u.diffs.push([DIFF_EQUAL,c])}}if(!a){e.splice(++n,0,u)}}}};diff_match_patch.prototype.patch_toText=function(e){var t=[];for(var n=0;n<e.length;n++){t[n]=e[n]}return t.join("")};diff_match_patch.prototype.patch_fromText=function(e){var t=[];if(!e){return t}var n=e.split("\n");var r=0;var i=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;while(r<n.length){var s=n[r].match(i);if(!s){throw new Error("Invalid patch string: "+n[r])}var o=new diff_match_patch.patch_obj;t.push(o);o.start1=parseInt(s[1],10);if(s[2]===""){o.start1--;o.length1=1}else if(s[2]=="0"){o.length1=0}else{o.start1--;o.length1=parseInt(s[2],10)}o.start2=parseInt(s[3],10);if(s[4]===""){o.start2--;o.length2=1}else if(s[4]=="0"){o.length2=0}else{o.start2--;o.length2=parseInt(s[4],10)}r++;while(r<n.length){var u=n[r].charAt(0);try{var a=decodeURI(n[r].substring(1))}catch(f){throw new Error("Illegal escape in patch_fromText: "+a)}if(u=="-"){o.diffs.push([DIFF_DELETE,a])}else if(u=="+"){o.diffs.push([DIFF_INSERT,a])}else if(u==" "){o.diffs.push([DIFF_EQUAL,a])}else if(u=="@"){break}else if(u===""){}else{throw new Error('Invalid patch mode "'+u+'" in: '+a)}r++}}return t};diff_match_patch.patch_obj=function(){this.diffs=[];this.start1=null;this.start2=null;this.length1=0;this.length2=0};diff_match_patch.patch_obj.prototype.toString=function(){var e,t;if(this.length1===0){e=this.start1+",0"}else if(this.length1==1){e=this.start1+1}else{e=this.start1+1+","+this.length1}if(this.length2===0){t=this.start2+",0"}else if(this.length2==1){t=this.start2+1}else{t=this.start2+1+","+this.length2}var n=["@@ -"+e+" +"+t+" @@\n"];var r;for(var i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case DIFF_INSERT:r="+";break;case DIFF_DELETE:r="-";break;case DIFF_EQUAL:r=" ";break}n[i+1]=r+encodeURI(this.diffs[i][1])+"\n"}return n.join("").replace(/%20/g," ")};this["diff_match_patch"]=diff_match_patch;this["DIFF_DELETE"]=DIFF_DELETE;this["DIFF_INSERT"]=DIFF_INSERT;this["DIFF_EQUAL"]=DIFF_EQUAL